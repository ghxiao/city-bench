CONNECTION osm1: host=localhost port=5432 dbname=osm_vienna user=postgres password=postgres
CONNECTION city: host=localhost port=5432 dbname=city_vienna user=postgres password=postgres

SCRIPT s1:  /data/gxiao/Projects/city-bench/tools/spatialRelationsDatabaseReader.py

mappingId A1
source osm1  SELECT osm_id, name, way AS geom FROM planet_osm_point WHERE amenity IS NOT NULL AND name IS NOT NULL AND osm_id > 0
target city INSERT INTO  amenity (id, name, geom) VALUES('{1}', '{2}', GeomFromEWKT('{3}'))

mappingId A2
source osm1 SELECT osm_id, name, way FROM planet_osm_polygon where (landuse IS NOT NULL or leisure IS NOT NULL) AND osm_id > 0
target city INSERT INTO  leisure (id, name, geom) VALUES('{1}', '{2}', GeomFromEWKT('{3}'))

mappingId A3
source osm1  SELECT osm_id, name, ST_AsEWKT(way) AS geo FROM planet_osm_point WHERE shop IS NOT NULL AND name IS NOT NULL AND osm_id > 0
target city INSERT INTO  shop (id, name, geom) VALUES('{1}', '{2}', GeomFromEWKT('{3}'))

mappingId A4
source s1 "city" "contains" "leisure" "amenity" "t1.id > 0" "t2.id > 0" "geom" "geom" "id" "id"
target city INSERT INTO  contains (id1, id2) VALUES('{1}', '{2}')

mappingId A5
source s1 "city" "next" "shop" "amenity" "t1.id > 0" "t2.id > 0" "geom" "geom" "id" "id" "0.01"
target city INSERT INTO  next (id1, id2) VALUES('{1}', '{2}')

# mappingId A1_1
# source osm1  SELECT osm_id, name, way AS geom FROM planet_osm_point WHERE amenity IS NOT NULL AND name IS NOT NULL AND osm_id > 0
# target city INSERT INTO  point (id, name, type, geom) VALUES('{1}', '{2}', '1',  GeomFromEWKT('{3}'))

mappingId A2_1
source osm1 SELECT osm_id, name, way FROM planet_osm_polygon where (landuse IS NOT NULL or leisure IS NOT NULL) AND osm_id > 0
target city INSERT INTO  polygon (id, name, type,  geom) VALUES('{1}', '{2}', '2', GeomFromEWKT('{3}'))

# mappingId A3_1
# source osm1  SELECT osm_id, name, ST_AsEWKT(way) AS geo FROM planet_osm_point WHERE shop IS NOT NULL AND name IS NOT NULL AND osm_id > 0
# target city INSERT INTO  point (id, name, type, geom) VALUES('{1}', '{2}', '3', GeomFromEWKT('{3}'))

# mappingId A4_1
# source s1 "city" "contains" "leisure" "amenity" "t1.id > 0" "t2.id > 0" "geom" "geom" "id" "id"
# target city INSERT INTO polygon_contains_point (id1, id2) VALUES('{1}', '{2}')



